<!DOCTYPE html><html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Simulateur de Devis - Installta-Clim</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
      background-color: #f7f7f7;
    }
    h1 {
      text-align: center;
      color: #2b4d6e;
    }
    .section {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    label {
      font-weight: bold;
    }
    input, select {
      margin: 5px 0;
      padding: 8px;
      width: 100%;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .custom-module {
      margin-bottom: 15px;
      border-top: 1px dashed #ccc;
      padding-top: 10px;
    }
    button {
      background-color: #2b4d6e;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin-top: 20px;
    }
    button:hover {
      background-color: #3e6d94;
    }
  </style>
</head>
<body><h1>Simulateur de Devis Domotique</h1><div class="section">
  <h2>Nos Packs</h2>
  <ul>
    <li><strong>Pack Essentiel :</strong> Commande lumière, 1 scénario de base, 1 interface mobile</li>
    <li><strong>Pack Confort :</strong> Volets roulants, éclairage, scénarios personnalisés, interface mobile complète</li>
    <li><strong>Pack Premium :</strong> Tous les éléments + intégration sécurité, caméras, contrôle vocal, supervision</li>
  </ul>
</div><div class="section">
  <h2>Simulateur</h2>
  <label for="pack-select">Choisissez un pack :</label>
  <select id="pack-select">
    <option>Pack Essentiel</option>
    <option>Pack Confort</option>
    <option>Pack Premium</option>
  </select>  <h3>Modules personnalisés</h3>
  <div id="modules-container">
    <div class="custom-module">
      <label>Nom du module :</label>
      <input type="text" class="module-name" placeholder="ex: Capteur de température">
      <label>Quantité :</label>
      <input type="number" class="module-qty" value="1">
      <label>Prix unitaire (€) :</label>
      <input type="number" class="module-price" value="100">
    </div>
  </div>
  <button onclick="addModule()">Ajouter un module</button>
  <button onclick="generatePDF()">Générer le PDF</button>
</div><script>
  function addModule() {
    const container = document.getElementById("modules-container");
    const mod = document.createElement("div");
    mod.className = "custom-module";
    mod.innerHTML = `
      <label>Nom du module :</label>
      <input type="text" class="module-name" placeholder="ex: Détecteur de mouvement">
      <label>Quantité :</label>
      <input type="number" class="module-qty" value="1">
      <label>Prix unitaire (€) :</label>
      <input type="number" class="module-price" value="100">
    `;
    container.appendChild(mod);
  }

  window.jsPDF = window.jspdf.jsPDF;

  function generatePDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const date = new Date().toLocaleDateString();
    const pack = document.getElementById("pack-select").value;
    const modules = document.querySelectorAll(".custom-module");
    let total = 0;

    doc.setFont("Helvetica", "bold");
    doc.setFontSize(16);
    doc.text("Installta-Clim", 20, 20);
    doc.setFontSize(10);
    doc.text("Devis n°: 2025-0419", 150, 20, { align: "right" });
    doc.text(`Date: ${date}`, 150, 26, { align: "right" });

    doc.setFontSize(12);
    doc.setFont("Helvetica", "normal");
    doc.text("Client : [Nom du client]", 20, 35);
    doc.text("Projet : Domotique résidentielle", 20, 42);

    doc.line(20, 48, 190, 48);

    let y = 58;
    doc.setFont("Helvetica", "bold");
    doc.text("Description", 20, y);
    doc.text("Qté", 110, y);
    doc.text("PU (€)", 130, y);
    doc.text("Total (€)", 160, y);
    doc.setFont("Helvetica", "normal");
    y += 6;

    let packPrice = pack === "Pack Essentiel" ? 1000 : pack === "Pack Confort" ? 1500 : 2100;
    doc.text(`${pack}`, 20, y);
    doc.text("1", 110, y);
    doc.text(`${packPrice}`, 130, y);
    doc.text(`${packPrice}`, 160, y);
    total += packPrice;
    y += 6;

    modules.forEach((mod) => {
      const desc = mod.querySelector(".module-name").value || "Module";
      const qty = parseInt(mod.querySelector(".module-qty").value) || 1;
      const price = parseInt(mod.querySelector(".module-price").value) || 100;
      const lineTotal = qty * price;

      doc.text(desc, 20, y);
      doc.text(`${qty}`, 110, y);
      doc.text(`${price}`, 130, y);
      doc.text(`${lineTotal}`, 160, y);
      total += lineTotal;
      y += 6;
    });

    const laborHours = 5;
    const laborRate = 60;
    const laborTotal = laborHours * laborRate;
    doc.text("Main d'œuvre", 20, y);
    doc.text(`${laborHours} h`, 110, y);
    doc.text(`${laborRate}`, 130, y);
    doc.text(`${laborTotal}`, 160, y);
    total += laborTotal;
    y += 10;

    doc.setFont("Helvetica", "bold");
    doc.text("Total :", 130, y);
    doc.text(`${total} €`, 160, y);

    y += 20;
    doc.setFontSize(9);
    doc.setFont("Helvetica", "italic");
    doc.text("Merci pour votre confiance.", 20, y);
    doc.text("Installta-Clim - contact@installta-clim.re", 20, y + 6);

    doc.save("devis_installta_clim.pdf");
  }
</script></body>
</html>
